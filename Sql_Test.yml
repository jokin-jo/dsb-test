---
- name: Azure SQL Database Hardening
  hosts: localhost
  connection: local
  gather_facts: no
  tasks:

  - name: Download foo.conf
    ansible.builtin.get_url:
      url: https://aka.ms/InstallAzureCliRpmEl8Edge
      dest: /opt/azure-cli.rpm
    register: my_name  

  - debug:
      var: my_name
  - command: ls -l /opt/azure-cli.rpm
    register: my_file

  - debug:
      var: my_file
  - command: python --version
    register: my_fle

  - debug:
      var: my_fle

  - command: dnf update
    register: my_upd
  - debug:
      var: my_upd
  - command: dnf install python
    register: my_upd1

  - debug: 
      var: my_upd1
      
  - name: Get details of Azure SQL Database
    azure_rm_sqldatabase_info:
      resource_group: manulife_test_1
      server_name: manulifesqlserver
    register: sqldb_info

  - name: Test the teach
    debug:
      var: sqldb_info
